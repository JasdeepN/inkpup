(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{104:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var l=t(2115),r=t(627),i=t(342),n=t(5155);let s=["one","two","three","four","five","six"];function c(e){let{items:a,loading:t=!1,onSelect:c}=e,o=(0,i.B)(),d=(0,l.useMemo)(()=>t&&!a.length?s.map(e=>(0,n.jsx)("div",{className:"gallery-card gallery-card--skeleton","aria-hidden":!0},"skeleton-".concat(e))):a.length?a.map((e,a)=>{var t;return(0,n.jsx)("figure",{className:"gallery-card","data-e2e-id":"gallery-item-".concat(a),children:(0,n.jsxs)("button",{type:"button",className:"gallery-card__inner",onClick:()=>null==c?void 0:c(e),"aria-label":"View ".concat(e.alt||"tattoo artwork"," in full size"),children:[(0,n.jsx)("div",{className:"gallery-card__image",children:(0,n.jsx)(r.A,{src:e.src,alt:e.alt||"tattoo",width:640,height:640,className:"gallery-card__img",priority:a<3,"data-e2e-id":"gallery-img-".concat(a)})}),(e.alt||o&&e.caption)&&(0,n.jsxs)("figcaption",{className:"gallery-card__meta","data-e2e-id":"gallery-caption-".concat(a),children:[(0,n.jsx)("span",{className:"gallery-card__meta-primary",children:e.alt||"Untitled artwork"}),o&&e.caption&&(0,n.jsx)("span",{className:"gallery-card__meta-secondary",children:e.caption})]})]})},null!=(t=e.id)?t:"".concat(e.src,"-").concat(a))}):(0,n.jsx)("p",{className:"gallery-empty",children:"No artwork in this category yet. Check back soon."}),[o,a,t,c]);return(0,n.jsx)("div",{className:"gallery-grid","data-state":t?"loading":"idle",children:d})}},342:(e,a,t)=>{"use strict";t.d(a,{B:()=>r});var l=t(8060);function r(){return"true"===l.env.NEXT_PUBLIC_SHOW_GALLERY_CAPTIONS}},627:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var l=t(6080),r=t.n(l),i=t(5155);function n(e){let{src:a,alt:t="",width:l,height:n,className:s,priority:c=!1,fill:o=!1,sizes:d,onLoadingComplete:u}=e,h=function(e){if(!e||/^https?:\/\//i.test(e))return e;let a="https://pub-3ea861254f324f48b6d6be6c41dffdc8.r2.dev";return a?"".concat(a.replace(/\/$/,"")).concat(e.startsWith("/")?"":"/").concat(e):e}(a);return o?(0,i.jsx)(r(),{src:h,alt:t,fill:!0,sizes:d,className:s,priority:c,onLoadingComplete:u}):(0,i.jsx)(r(),{src:h,alt:t,width:l,height:n,className:s,priority:c,onLoadingComplete:u})}},991:(e,a,t)=>{Promise.resolve().then(t.bind(t,5287))},5287:(e,a,t)=>{"use strict";t.d(a,{default:()=>o});var l=t(2115);let r=["healed","available","flash","art"];var i=t(104),n=t(627),s=t(342),c=t(5155);function o(e){var a,t;let{initialCategory:o,initialItems:d}=e,u=(0,s.B)(),[h,m]=(0,l.useState)(o),[g,f]=(0,l.useState)({[o]:d}),[p,y]=(0,l.useState)(!1),[_,v]=(0,l.useState)(null),[w,x]=(0,l.useState)(null),[N,b]=(0,l.useState)(null),[j,k]=(0,l.useState)(null),C=(0,l.useMemo)(()=>{var e;return null!=(e=g[h])?e:[]},[h,g]),S=(0,l.useCallback)(async e=>{if(g[e])return void m(e);y(!0),v(null);try{let a=await fetch("/api/gallery?category=".concat(e),{cache:"no-store"});if(!a.ok)throw Error("Could not load ".concat(e," artwork."));let t=await a.json();f(a=>({...a,[e]:t.items})),m(e)}catch(e){v(e instanceof Error?e.message:"Unable to load gallery.")}finally{y(!1)}},[g]),E=(0,l.useCallback)(()=>{x(null),b(null),k(null)},[]),M=(0,l.useCallback)(e=>{let a=Math.min(.9*window.innerWidth,960),t=Math.min(.9*window.innerHeight,720),l=Math.min(a/e.naturalWidth,t/e.naturalHeight,1);k({width:Math.max(280,Math.round(e.naturalWidth*l)),height:Math.max(280,Math.round(e.naturalHeight*l))})},[]);(0,l.useEffect)(()=>{if(!N)return;let e=()=>M(N);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[N,M]);let L=(0,l.useCallback)(e=>{let a={naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight};b(a),M(a)},[M]);return(0,l.useEffect)(()=>{w||(b(null),k(null))},[w]),(0,c.jsxs)("div",{className:"gallery-view",children:[(0,c.jsx)("div",{className:"gallery-filters",role:"tablist","aria-label":"Gallery categories",children:r.map(e=>{let a=e.charAt(0).toUpperCase()+e.slice(1),t=e===h;return(0,c.jsx)("button",{type:"button",role:"tab","aria-selected":t,className:"gallery-filter ".concat(t?"gallery-filter--active":""),onClick:()=>S(e),children:a},e)})}),_&&(0,c.jsx)("div",{className:"gallery-error",role:"alert",children:_}),(0,c.jsx)(i.default,{items:C,loading:p,onSelect:x}),w&&(0,c.jsx)("dialog",{className:"gallery-modal",open:!0,"aria-label":null!=(a=w.alt)?a:"Artwork preview",onCancel:e=>{e.preventDefault(),E()},onClose:E,children:(0,c.jsxs)("div",{className:"gallery-modal__content",children:[(0,c.jsx)("button",{className:"gallery-modal__close",type:"button",onClick:E,"aria-label":"Close image preview",children:"âœ•"}),(0,c.jsx)("div",{className:"gallery-modal__image",style:j?{width:"".concat(j.width,"px"),height:"".concat(j.height,"px")}:void 0,children:(0,c.jsx)(n.A,{src:w.src,alt:null!=(t=w.alt)?t:"Tattoo artwork",fill:!0,sizes:"(min-width: 1024px) 70vw, 90vw",className:"gallery-modal__img",onLoadingComplete:L})}),(w.alt||u&&w.caption)&&(0,c.jsxs)("div",{className:"gallery-modal__footer",children:[(0,c.jsx)("p",{className:"gallery-modal__title",children:w.alt||"Untitled artwork"}),u&&w.caption&&(0,c.jsx)("p",{className:"gallery-modal__caption",children:w.caption})]})]})})]})}},6080:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return c},getImageProps:function(){return s}});let l=t(5568),r=t(6820),i=t(5208),n=l._(t(7472));function s(e){let{props:a}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let c=i.Image}},e=>{e.O(0,[208,441,261,358],()=>e(e.s=991)),_N_E=e.O()}]);